<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Tessere Soci - Test</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    header img { max-height: 80px; margin-bottom: 20px; }
    table { margin: auto; border-collapse: collapse; width: 90%; max-width: 900px; }
    th, td { border: 1px solid #ccc; padding: 10px; }
    th { background: #f2f2f2; }
    .qr { margin: auto; }
  </style>
</head>
<body>

<header>
  <img src="logoperseidi.png" alt="Logo Associazione">
  <h1>Elenco Soci</h1>
</header>

<div id="elenco"></div>

<script>
const soci = [
  {id: "001", nome: "Mario", cognome: "Rossi", attivo: true},
  {id: "002", nome: "Luca", cognome: "Bianchi", attivo: false}
];

// Genera tabella
let html = "<table><tr><th>Nome</th><th>Cognome</th><th>Stato</th><th>QR</th></tr>";
soci.forEach(socio => {
  const statoTxt = socio.attivo ? "Attivo" : "Non attivo";
  const statoColor = socio.attivo ? "green" : "red";
  const qrId = "qr" + socio.id;
  html += `
    <tr>
      <td>${socio.nome}</td>
      <td>${socio.cognome}</td>
      <td style="color:${statoColor}; font-weight:bold">${statoTxt}</td>
      <td><div id="${qrId}" class="qr"></div></td>
    </tr>`;
});
html += "</table>";
document.getElementById("elenco").innerHTML = html;

// Genera QR
soci.forEach(socio => {
  const url = window.location.href.split('?')[0] + "?id=" + socio.id;
  new QRCode(document.getElementById("qr" + socio.id), {
    text: url,
    width: 100,
    height: 100
  });
});
</script>

</body>
</html>